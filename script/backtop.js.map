{"version":3,"sources":["backtop.js"],"names":["define","$","BackTop","el","opts","this","extend","DEFAULTS","$el","mode","on","proxy","_move","_go","window","_checkPosition","scrollObject","dest","pos","height","speed","prototype","constructor","console","log","scrollTop","is","animate","fadeIn","css","fadeOut","fn","backtop","each"],"mappings":"AAAAA,QAAQ,UAAW,SAASC,GAGxB,QAASC,GAASC,EAAIC,GAElBC,KAAKD,KAAOH,EAAEK,UAAWJ,EAAQK,SAAUH,GAC3CC,KAAKG,IAAMP,EAAEE,GAKS,QAAlBE,KAAKD,KAAKK,KAEVJ,KAAKG,IAAIE,GAAG,QAAST,EAAEU,MAAMN,KAAKO,MAAOP,OAEzCA,KAAKG,IAAIE,GAAG,QAAST,EAAEU,MAAMN,KAAKQ,IAAKR,OAE3CJ,EAAEa,QAAQJ,GAAG,SAAUT,EAAEU,MAAMN,KAAKU,eAAgBV,OAEpDA,KAAKU,iBAjBT,GAAIC,GAAef,EAAE,aA+FrB,OA5EAC,GAAQK,UAEJE,KAAM,OAENQ,KAAM,EAENC,IAAKjB,EAAEa,QAAQK,SACfC,MAAO,KAiBXlB,EAAQmB,WACJC,YAAapB,EACbU,MAAO,WACHW,QAAQC,IAAI,iBACZ,IAAIpB,GAAOC,KAAKD,KAChBa,EAAOb,EAAKa,IAEZM,SAAQC,IAAIP,GACRhB,EAAEa,QAAQW,aAAeR,IACpBD,EAAaU,GAAG,eACjBH,QAAQC,IAAI,GACZD,QAAQC,IAAIR,GACZA,EAAaW,SACTF,UAAWR,GACZb,EAAKgB,UAIpBP,IAAK,WACD,GAAII,GAAOZ,KAAKD,KAAKa,IACjBhB,GAAEa,QAAQW,aAAeR,GAC1BD,EAAaS,UAAUR,IAG9BF,eAAgB,WAEZ,GAAIP,GAAMH,KAAKG,GACXP,GAAEa,QAAQW,YAAcpB,KAAKD,KAAKc,IAClCV,EAAIoB,SAASC,IAAI,UAAW,SAE5BrB,EAAIsB,YAYhB7B,EAAE8B,GAAGzB,QACD0B,QAAS,SAAS5B,GAId,MAAOC,MAAK4B,KAAK,WACb,GAAI/B,GAAQG,KAAMD,SAK1BF,QAASA","file":"backtop.js","sourcesContent":["define(['jquery'], function($) {\r\n    // 不用scrollto模块了，直接在move和go方法中操作html和body的scrollTop\r\n    var scrollObject = $('html, body');\r\n    function BackTop (el, opts) {\r\n        // body...\r\n        this.opts = $.extend({}, BackTop.DEFAULTS, opts);\r\n        this.$el = $(el);\r\n        // this.scroll = new scrollto.ScrollTo({\r\n        //     dest: 0,\r\n        //     speed: this.opts.speed\r\n        // });\r\n        if (this.opts.mode == 'move') {\r\n            // jquery的proxy方法相当于原生的bind方法，改变函数的执行环境，这里this原本是指向BackTop的实例(因为是调用BackTop的原型方法)，调用proxy方法后指向this.$el\r\n            this.$el.on('click', $.proxy(this._move, this));\r\n        } else {\r\n            this.$el.on('click', $.proxy(this._go, this));\r\n        }\r\n        $(window).on('scroll', $.proxy(this._checkPosition, this));\r\n        // this._checkPositionOnload();\r\n        this._checkPosition();\r\n    }\r\n    BackTop.DEFAULTS = {\r\n        // 回到顶部的方式\r\n        mode: 'move',\r\n        // 回到顶部的终点\r\n        dest: 0,\r\n        // 表示回到顶部按钮显示隐藏切换的位置\r\n        pos: $(window).height(),\r\n        speed: 800\r\n    }\r\n    /*BackTop.prototype._move = function() {\r\n        this.scroll.move();\r\n    }\r\n    BackTop.prototype._go = function() {\r\n        this.scroll.go();\r\n    }\r\n    BackTop.prototype._checkPosition = function() {\r\n        var $el = this.$el;\r\n        if ($(window).scrollTop() > this.opts.pos) {\r\n            $el.fadeIn().css('display', 'block');\r\n        } else {\r\n            $el.fadeOut();\r\n        }\r\n    }*/\r\n    /*用字面量语法重写原型对象*/\r\n    BackTop.prototype = {\r\n        constructor: BackTop,\r\n        _move: function() {\r\n            console.log('move executed~')\r\n            var opts = this.opts,\r\n            dest = opts.dest;\r\n            // console.log(this)\r\n            console.log(dest);\r\n            if ($(window).scrollTop() != dest) {\r\n                if (!scrollObject.is(':animated')) {\r\n                    console.log(1);\r\n                    console.log(scrollObject);\r\n                    scrollObject.animate({\r\n                        scrollTop: dest\r\n                    }, opts.speed);\r\n                }\r\n            }        \r\n        },\r\n        _go: function() {\r\n            var dest = this.opts.dest;\r\n            if ($(window).scrollTop() != dest) {\r\n               scrollObject.scrollTop(dest); \r\n            }       \r\n        },\r\n        _checkPosition: function() {\r\n            // console.log('checkPosition executed~');\r\n            var $el = this.$el;\r\n            if ($(window).scrollTop() > this.opts.pos) {\r\n                $el.fadeIn().css('display', 'block');\r\n            } else {\r\n                $el.fadeOut();\r\n            }\r\n        }\r\n        /*,\r\n        _checkPositionOnload: function () {\r\n            var $el = this.$el;\r\n            if ($(window).scrollTop() > this.opts.pos) {\r\n                $el.css('display', 'block');\r\n            }\r\n        }*/\r\n    }\r\n    // 将一个对象添加到jquery的原型上从而提供新的jquery实例方法，这里就相当于给jquery实例对象提供了一个backtop方法，这也是实现jquery插件的常用方法，对象里定义的方法名就是插件方法名\r\n    $.fn.extend({\r\n        backtop: function(opts) {\r\n            // return 是为了实现连缀，这里的this指代调用插件时用jquery选择的元素，调用each方法是因为可能会选择多个元素\r\n            // console.log(this); // 回到顶部按钮元素\r\n            // .each()方法的回调函数的执行环境是当前dom元素，也就是说this始终指向当前dom元素，所以下面的回掉函数就是创建一个BackTop的实例，并把当前dom元素作为参数传入\r\n            return this.each(function() {\r\n                new BackTop(this, opts);\r\n            })\r\n        }\r\n    })\r\n    return {\r\n        BackTop: BackTop\r\n    }\r\n})"]}